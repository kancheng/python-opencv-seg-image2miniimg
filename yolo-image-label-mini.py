import cv2
import numpy as np
point_obj = [[1203.2835820895523,540.5522388059701],[1179.4029850746267,553.9850746268656],[1165.1785714285713,548.2142857142857],[1156.25,556.25],[1163.392857142857,585.7142857142857],[1156.25,592.8571428571428],[1143.75,592.8571428571428],[1153.5714285714284,599.9999999999999],[1140.1785714285713,608.0357142857142],[1163.392857142857,618.7499999999999],[1148.2142857142856,647.3214285714286],[1145.5357142857142,681.2499999999999],[1159.8214285714284,720.5357142857142],[1174.1071428571427,742.8571428571428],[1170.5357142857142,767.8571428571428],[1170.5357142857142,832.1428571428571],[1175.0,890.1785714285713],[1190.1785714285713,918.7499999999999],[1173.2142857142856,946.4285714285713],[1173.2142857142856,973.2142857142857],[1193.75,975.892857142857],[1225.892857142857,972.3214285714284],[1245.5357142857142,959.8214285714284],[1254.4642857142856,944.642857142857],[1256.2499999999998,912.4999999999999],[1253.5714285714284,871.4285714285713],[1291.9642857142856,865.1785714285713],[1287.4999999999998,891.9642857142857],[1296.4285714285713,915.1785714285713],[1315.1785714285713,916.9642857142857],[1330.3571428571427,908.9285714285713],[1350.892857142857,911.6071428571428],[1363.392857142857,906.2499999999999],[1361.6071428571427,885.7142857142857],[1366.9642857142856,865.1785714285713],[1364.2857142857142,840.1785714285713],[1368.7499999999998,831.2499999999999],[1383.9285714285713,813.3928571428571],[1376.7857142857142,797.3214285714284],[1394.642857142857,782.1428571428571],[1416.0714285714284,814.2857142857142],[1433.9285714285713,818.7499999999999 ],[1449.9999999999998,812.4999999999999],[1434.8214285714284,742.8571428571428],[1442.8571428571427, 699.9999999999999],[1439.2857142857142,647.3214285714286],[1429.4642857142856,627.6785714285713],[1423.2142857142856,597.3214285714286],[1417.8571428571427,573.2142857142857],[ 1379.4642857142856,533.0357142857142],[1356.2499999999998,514.2857142857142],[1317.8571428571427,511.60714285714283],[1284.8214285714284,511.60714285714283],[1258.0357142857142,515.1785714285713],[1246.4285714285713,518.75], [1223.2142857142856,525.0],[1213.392857142857,522.3214285714286]]

print(point_obj[0])
for coordinates in range(len(point_obj)) :
    print("Coordinates : ", coordinates)
    for xy in range(len(point_obj[coordinates])) :
        print(point_obj[coordinates][xy])
        point_obj[coordinates][xy]=int(point_obj[coordinates][xy])

print(point_obj)

# Example polygon vertex coordinates
polygon_points = np.array(point_obj)
# EX :
# polygon_points = np.array([[100, 50], [200, 80], [250, 200], [150, 250], [60, 170]])


# Calculate the center of gravity (center point) of a polygon
center_x = np.mean(polygon_points[:, 0])
center_y = np.mean(polygon_points[:, 1])
center = (int(center_x), int(center_y))
print(f"The coordinates of the center point of the polygon are: {center}")

# Read image
image = cv2.imread('cat.png')

# Creates a blank mask the same size as the image
mask = np.zeros_like(image)

# Fill polygon area
cv2.fillPoly(mask, [polygon_points], (255, 255, 255))

# Use masks to cut images
result = cv2.bitwise_and(image, mask)

# Find the bounding rectangle of the polygon used to cut the image
x, y, w, h = cv2.boundingRect(polygon_points)
# cropped_image = result[y:y+h, x:x+w]
cropped_image = result[y-10:y+h+10, x-10:x+w+10]
cropped_image2 = image[y-10:y+h+10, x-10:x+w+10]
# Show
# cv2.imshow("Cropped Image", cropped_image)
# cv2.waitKey(0)
# cv2.destroyAllWindows()

# Save the cropped image
cv2.imwrite('cropped_image_mask.png', cropped_image)
cv2.imwrite('cropped_image_raw.png', cropped_image2)